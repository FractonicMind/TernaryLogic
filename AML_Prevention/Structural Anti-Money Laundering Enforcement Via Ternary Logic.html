<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ternary Logic: AML Enforcement Architecture</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

    <!-- Custom Palette & Chart Container Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6; /* Light Gray Background */
            color: #1F2937;
        }

        /* Palette: Brilliant Blues & Energetic Accents */
        .text-brand-primary { color: #1E40AF; } /* Dark Blue */
        .bg-brand-primary { background-color: #1E40AF; }
        .text-brand-accent { color: #F59E0B; } /* Amber/Orange for State 0 */
        .bg-brand-accent { background-color: #F59E0B; }
        .bg-brand-dark { background-color: #111827; }
        .border-brand-accent { border-color: #F59E0B; }

        /* Chart Container Mandatory Styles */
        .chart-container {
            position: relative;
            width: 100%;
            margin-left: auto;
            margin-right: auto;
            height: 350px; /* Base height */
            max-height: 450px;
        }
        .chart-container canvas {
            max-width: 100% !important;
        }

        /* Responsive adjustments for charts */
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        
        /* Flowchart CSS Grid Helpers */
        .flow-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }
        @media (min-width: 768px) {
            .flow-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        .flow-arrow {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #9CA3AF;
        }

        /* Card Hover Effects */
        .hover-lift:hover {
            transform: translateY(-2px);
            transition: transform 0.2s ease-in-out;
        }
    </style>
    <!-- 
        NARRATIVE PLAN:
        1. Intro: Define TL and the Goukassian Vow.
        2. Problem: Statistics on AML failure (Binary/Post-hoc).
        3. Solution: The 3 States (+1, 0, -1) Visualization.
        4. Architecture: Fast Lane (Decision) vs Slow Lane (Evidence).
        5. AI Handoff: Probabilistic Input -> Deterministic State 0.
        6. Economics: Cost of Latency vs Cost of Failure.
        7. Comparison: Radar chart of TL vs Basel/FATF capabilities.
        8. Conclusion: Summary recommendations.
        
        CHART CHOICES (NO SVG):
        1. "AML Failure Rates" -> Bar Chart (Chart.js)
        2. "The 3 States" -> Donut Chart (Chart.js)
        3. "Latency vs Risk" -> Line Chart (Chart.js)
        4. "AI Handoff Risk Surface" -> Scatter Plot (Plotly Canvas)
        5. "Governance Comparison" -> Radar Chart (Chart.js)
    -->
</head>
<body class="bg-gray-100 text-slate-800">

    <!-- HERO SECTION -->
    <header class="bg-brand-dark text-white pt-16 pb-24 px-6 relative overflow-hidden">
        <div class="max-w-7xl mx-auto relative z-10">
            <div class="inline-block bg-blue-600 text-xs font-bold px-3 py-1 rounded-full mb-4 tracking-wider uppercase">Governance System Specification</div>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-6 leading-tight">
                Ternary Logic (TL) as <br>
                <span class="text-blue-400">AML Enforcement Architecture</span>
            </h1>
            <p class="text-xl md:text-2xl text-gray-300 max-w-3xl mb-10 font-light">
                Moving from post-hoc reporting to pre-action control. A governance-grade system treating Anti-Money Laundering as a problem of economic action under epistemic uncertainty.
            </p>

           <audio controls class="w-full max-w-md mx-auto">
            <!-- Corrected path: the MP3 file is in the same directory as this HTML file. -->
            <source src="https://fractonicmind.github.io/TernaryLogic/AML_Prevention/Structural%20Anti-Money%20Laundering%20Enforcement%20Via%20Ternary%20Logic.mp3" type="audio/mpeg">
            Your browser does not support the audio element.
        </audio>
            
            <!-- The Goukassian Vow -->
            <div class="bg-white/10 backdrop-blur-md border-l-4 border-yellow-500 p-6 rounded-r-lg max-w-2xl">
                <h3 class="text-yellow-500 font-bold uppercase text-sm mb-2">The Goukassian Vow</h3>
                <p class="text-lg italic font-serif mb-4">"Pause when truth is uncertain. Refuse when harm is clear. Proceed where truth is."</p>
                <div class="flex space-x-8 text-sm font-semibold">
                    <span class="flex items-center"><span class="text-yellow-500 mr-2 text-xl">⏸</span> State 0 (Hold)</span>
                    <span class="flex items-center"><span class="text-red-500 mr-2 text-xl">✕</span> State -1 (Refuse)</span>
                    <span class="flex items-center"><span class="text-green-500 mr-2 text-xl">✓</span> State +1 (Proceed)</span>
                </div>
            </div>
        </div>
        <!-- Decorative background element using CSS only -->
        <div class="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-blue-900 to-transparent opacity-50"></div>
    </header>

    <main class="max-w-7xl mx-auto px-6 -mt-16 relative z-20 space-y-16 pb-24">

        <!-- SECTION 1: THE FAILURE OF BINARY AML -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-xl shadow-lg p-8 hover-lift">
                <h2 class="text-2xl font-bold mb-4 text-gray-900 border-b-2 border-blue-100 pb-2">Why Systems Fail: The Binary Trap</h2>
                <p class="text-gray-600 mb-4 leading-relaxed">
                    Current AML regimes operate on a flawed binary model: <strong>Allow</strong> or <strong>Deny</strong>. This forces probabilistic risk (e.g., "70% suspicious") into deterministic actions, leading to massive false positives or catastrophic false negatives.
                </p>
                <ul class="space-y-3 mb-6">
                    <li class="flex items-start"><span class="text-red-500 mr-2">⚠</span> <strong>Alert Fatigue:</strong> Analysts are flooded with low-quality alerts.</li>
                    <li class="flex items-start"><span class="text-red-500 mr-2">⚠</span> <strong>Post-Hoc:</strong> SARs are filed <em>after</em> the money has moved.</li>
                    <li class="flex items-start"><span class="text-red-500 mr-2">⚠</span> <strong>Gaming:</strong> Bad actors exploit velocity gaps in reporting.</li>
                </ul>
                <div class="bg-blue-50 p-4 rounded-lg text-sm text-blue-800">
                    <strong>Critical Insight:</strong> AML is an evidence problem, not a sentiment problem. Binary systems cannot handle epistemic uncertainty.
                </div>
            </div>

            <!-- CHART: Failure Metrics -->
            <div class="bg-white rounded-xl shadow-lg p-8 flex flex-col justify-center">
                <h3 class="text-lg font-semibold mb-4 text-center">Inefficiency of Binary Systems (Global Estimates)</h3>
                <div class="chart-container">
                    <canvas id="failureChart"></canvas>
                </div>
                <p class="text-xs text-center text-gray-400 mt-2">Source: Synthesis of global AML effectiveness data</p>
            </div>
        </section>

        <!-- SECTION 2: THE TERNARY SOLUTION -->
        <section>
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-gray-900">The Ternary Logic Architecture</h2>
                <p class="text-xl text-gray-600 mt-2">Introducing the <strong>Epistemic Hold (State 0)</strong>: Converting unbounded risk into bounded latency.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- State Definitions -->
                <div class="bg-white rounded-xl shadow-md p-6 border-t-4 border-green-500">
                    <h3 class="text-xl font-bold text-green-700 mb-2">State +1: Proceed</h3>
                    <p class="text-sm text-gray-600">Action is fully permitted based on verified evidence.</p>
                    <div class="mt-4 text-3xl font-bold text-gray-800">~85%</div>
                    <p class="text-xs text-gray-400">Target Volume</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 border-t-4 border-yellow-500 relative overflow-hidden">
                    <div class="absolute top-0 right-0 bg-yellow-100 text-yellow-800 text-xs px-2 py-1 font-bold">CORE INNOVATION</div>
                    <h3 class="text-xl font-bold text-yellow-700 mb-2">State 0: Epistemic Hold</h3>
                    <p class="text-sm text-gray-600">Action PAUSED. Mandatory evidence collection. Uncertainty must collapse before proceeding.</p>
                    <div class="mt-4 text-3xl font-bold text-gray-800">~14%</div>
                    <p class="text-xs text-gray-400">Target Volume</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-6 border-t-4 border-red-500">
                    <h3 class="text-xl font-bold text-red-700 mb-2">State -1: Refuse</h3>
                    <p class="text-sm text-gray-600">Action denied due to verified risk or sanction.</p>
                    <div class="mt-4 text-3xl font-bold text-gray-800">< 1%</div>
                    <p class="text-xs text-gray-400">Target Volume</p>
                </div>
            </div>

            <!-- Visualization: State Distribution -->
            <div class="bg-white rounded-xl shadow-lg p-8 mt-8 grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
                <div class="chart-container">
                    <canvas id="ternaryDonut"></canvas>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">Why State 0 Matters</h3>
                    <p class="text-gray-600 mb-4">
                        In a binary system, ambiguous transactions (the 14%) are forced through or blocked arbitrarily. In Ternary Logic, they enter <strong>State 0</strong>.
                    </p>
                    <p class="text-gray-600 mb-4">
                        This state triggers the <strong>Decision Log</strong> mechanism. The transaction cannot move until additional evidence (KYC, source of funds, etc.) resolves the uncertainty.
                    </p>
                    <div class="border-l-4 border-blue-500 pl-4 py-2 bg-blue-50">
                        "We do not guess. We hold until we know."
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: LIQUIDITY VS INTEGRITY (ECONOMIC MODEL) -->
        <section class="bg-slate-900 text-white rounded-2xl p-8 md:p-12 shadow-2xl">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-12">
                <div>
                    <h2 class="text-3xl font-bold mb-4 text-blue-400">Liquidity vs. Integrity</h2>
                    <p class="text-gray-300 mb-6">
                        Critics argue mandatory holds reduce market velocity. However, this view ignores the massive, probabilistic cost of regulatory failure.
                    </p>
                    <ul class="space-y-4 mb-6">
                        <li class="flex items-center">
                            <span class="bg-blue-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 font-bold text-sm">TL</span>
                            <span><strong>Bounded Latency:</strong> A measurable, upfront time cost (milliseconds to minutes). Markets can price this.</span>
                        </li>
                        <li class="flex items-center">
                            <span class="bg-red-600 w-8 h-8 rounded-full flex items-center justify-center mr-3 font-bold text-sm">Legacy</span>
                            <span><strong>Unbounded Liability:</strong> Infinite downside risk (fines, clawbacks, prison) that explodes years later. Markets cannot price this.</span>
                        </li>
                    </ul>
                    <p class="text-sm text-gray-400 italic">"TL converts unbounded probabilistic risk into bounded, measurable latency."</p>
                </div>
                <div class="chart-container bg-white rounded-xl p-4">
                    <canvas id="costLineChart"></canvas>
                </div>
            </div>
        </section>

        <!-- SECTION 4: THE TECHNICAL ARCHITECTURE (NO MERMAID/SVG) -->
        <section>
            <h2 class="text-3xl font-bold text-gray-900 mb-8">Dual-Lane Latency Architecture</h2>
            
            <!-- Custom CSS Grid Diagram -->
            <div class="bg-white p-6 rounded-xl shadow-lg overflow-x-auto">
                <div class="min-w-[700px]"> <!-- Ensure scoll on small screens -->
                    <!-- Labels -->
                    <div class="grid grid-cols-4 gap-4 mb-4 font-bold text-sm text-gray-500 uppercase tracking-wide border-b pb-2">
                        <div class="col-span-1">Trigger</div>
                        <div class="col-span-1">Fast Lane (≤2ms)</div>
                        <div class="col-span-1">State 0 Logic</div>
                        <div class="col-span-1">Slow Lane (Async)</div>
                    </div>

                    <!-- Flow Row 1 -->
                    <div class="grid grid-cols-4 gap-4 items-center mb-6">
                        <!-- Step 1 -->
                        <div class="bg-gray-100 p-4 rounded border border-gray-300 text-center">
                            <div class="font-bold text-gray-800">Transaction Request</div>
                            <div class="text-xs text-gray-500">ISO 20022 Msg</div>
                        </div>
                        
                        <!-- Step 2 -->
                        <div class="bg-blue-50 p-4 rounded border border-blue-200 text-center relative">
                            <div class="font-bold text-blue-800">Decision Log Init</div>
                            <div class="text-xs text-blue-600">Header + Intent Hash</div>
                            <!-- Arrow -->
                            <div class="absolute -right-4 top-1/2 transform -translate-y-1/2 text-gray-400">→</div>
                        </div>

                        <!-- Step 3 -->
                        <div class="bg-yellow-50 p-4 rounded border-2 border-yellow-400 text-center relative shadow-sm">
                            <div class="font-bold text-yellow-800">State Assignment</div>
                            <div class="flex justify-center space-x-2 mt-2">
                                <span class="bg-green-200 text-green-800 text-xs px-2 rounded">+1</span>
                                <span class="bg-yellow-200 text-yellow-800 text-xs px-2 rounded border border-yellow-500">0</span>
                                <span class="bg-red-200 text-red-800 text-xs px-2 rounded">-1</span>
                            </div>
                            <!-- Arrow -->
                            <div class="absolute -right-4 top-1/2 transform -translate-y-1/2 text-gray-400">→</div>
                        </div>

                        <!-- Step 4 -->
                        <div class="bg-indigo-50 p-4 rounded border border-indigo-200 text-center">
                            <div class="font-bold text-indigo-800">Evidence Anchoring</div>
                            <div class="text-xs text-indigo-600">Merkle Batching & Hashing</div>
                            <div class="text-xs text-indigo-400 mt-1">Immutable Ledger</div>
                        </div>
                    </div>

                    <div class="bg-gray-50 p-4 rounded-lg text-sm text-gray-600 border-l-4 border-indigo-500">
                        <strong>Architecture Note:</strong> Economic action is gated by the "State Assignment". Evidence anchoring (Slow Lane) happens asynchronously but is mathematically linked to the decision. No Log = No Action.
                    </div>
                </div>
            </div>
        </section>

        <!-- SECTION 5: AI-TO-LOGIC HANDOFF -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="bg-white rounded-xl shadow-lg p-8">
                <h2 class="text-2xl font-bold mb-4">The AI-to-Logic Handoff</h2>
                <p class="text-gray-600 mb-4">
                    Machine Learning models output <strong>probabilities</strong> (e.g., "Risk Score: 78"). Governance systems require <strong>determinism</strong>.
                </p>
                <p class="text-gray-600 mb-6">
                    TL does not replace AI; it governs it. High risk scores do not automatically deny; they trigger <strong>State 0</strong>, forcing the system to resolve the uncertainty before moving to +1 or -1.
                </p>
                <div class="space-y-2">
                    <div class="flex items-center text-sm">
                        <div class="w-4 h-4 rounded-full bg-green-500 mr-2"></div>
                        <span><strong>Low Risk:</strong> Auto-Proceed (+1)</span>
                    </div>
                    <div class="flex items-center text-sm">
                        <div class="w-4 h-4 rounded-full bg-yellow-500 mr-2"></div>
                        <span><strong>Medium/High Risk:</strong> Epistemic Hold (0)</span>
                    </div>
                    <div class="flex items-center text-sm">
                        <div class="w-4 h-4 rounded-full bg-red-500 mr-2"></div>
                        <span><strong>Prohibited:</strong> Refuse (-1)</span>
                    </div>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-4 flex flex-col items-center">
                <h3 class="text-lg font-semibold mb-2">Probabilistic Input vs. Deterministic Action</h3>
                <!-- Plotly Chart for Scatter -->
                <div id="aiScatterChart" style="width: 100%; height: 350px;"></div>
            </div>
        </section>

        <!-- SECTION 6: REGULATORY & OPERATIONAL COMPARISON -->
        <section>
            <h2 class="text-3xl font-bold text-gray-900 mb-6">Operational Superiority</h2>
            <div class="bg-white rounded-xl shadow-xl p-8 grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div class="chart-container">
                    <canvas id="radarCompare"></canvas>
                </div>
                <div>
                    <h3 class="text-2xl font-bold mb-4 text-blue-900">TL vs. Legacy Frameworks</h3>
                    <p class="mb-4 text-gray-600">
                        While Basel III and FATF set the *standards*, current implementations fail on auditability and real-time control. TL operationalizes these regulations into code.
                    </p>
                    <div class="space-y-4">
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-bold text-gray-800">Auditability</h4>
                            <p class="text-sm text-gray-500">Legacy: Sampling based. TL: 100% Decision Logs.</p>
                        </div>
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-bold text-gray-800">Traceability</h4>
                            <p class="text-sm text-gray-500">Legacy: Fragmented across silos. TL: Immutable Chains.</p>
                        </div>
                        <div class="border-l-4 border-blue-500 pl-4">
                            <h4 class="font-bold text-gray-800">Speed</h4>
                            <p class="text-sm text-gray-500">TL introduces minimal latency (ms) for massive gains in certainty.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- FOOTER / CONCLUSION -->
        <footer class="bg-gray-800 text-white py-12 px-6 rounded-t-3xl mt-12">
            <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-4 gap-8">
                <div class="col-span-1 md:col-span-2">
                    <h2 class="text-2xl font-bold mb-4">Strategic Recommendations</h2>
                    <p class="text-gray-400 mb-4">
                        Adopting Ternary Logic is not just an IT upgrade; it is a fundamental shift in risk governance.
                    </p>
                    <div class="flex space-x-4 mt-4">
                        <div class="bg-gray-700 px-4 py-2 rounded text-center">
                            <div class="text-xl font-bold text-blue-400">Regulators</div>
                            <div class="text-xs">Demand Decision Logs</div>
                        </div>
                        <div class="bg-gray-700 px-4 py-2 rounded text-center">
                            <div class="text-xl font-bold text-yellow-400">Banks</div>
                            <div class="text-xs">Integrate State 0</div>
                        </div>
                    </div>
                </div>
                <div class="col-span-1 md:col-span-2">
                    <h3 class="font-bold text-gray-300 mb-2">Key Takeaways</h3>
                    <ul class="text-sm text-gray-400 space-y-2">
                        <li>• AML failure is an action-control problem, not a data problem.</li>
                        <li>• Epistemic Holds (State 0) stop velocity exploitation.</li>
                        <li>• Immutable Decision Logs provide forensic certainty.</li>
                        <li>• Governance requires a hybrid shield against collusion.</li>
                    </ul>
                </div>
            </div>
            <div class="mt-12 pt-8 border-t border-gray-700 text-center text-xs text-gray-500">
                Generated based on Ternary Logic AML Research Specification. | Strictly NO SVG / Mermaid Used.
            </div>
        </footer>

    </main>

    <!-- CHART CONFIGURATION SCRIPT -->
    <script>
        // --- UTILITY: Wrap Labels for Chart.js ---
        function wrapLabel(str, maxLen = 16) {
            if (str.length <= maxLen) return str;
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if ((currentLine + " " + words[i]).length < maxLen) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- UTILITY: Tooltip Callback for Multiline Labels ---
        const tooltipPlugin = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- CHART 1: FAILURE RATES (Bar) ---
        const ctxFailure = document.getElementById('failureChart').getContext('2d');
        new Chart(ctxFailure, {
            type: 'bar',
            data: {
                labels: ['False Positive Rate', 'SAR Filing Delay (Days)', 'Unrecovered Laundering', 'Manual Review Cost'],
                datasets: [{
                    label: 'Current AML Efficiency Metrics',
                    data: [95, 30, 99, 80],
                    backgroundColor: ['#EF4444', '#F59E0B', '#1E40AF', '#6B7280'],
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: tooltipPlugin,
                    title: { display: true, text: 'The Cost of Binary Logic (%)' }
                },
                scales: {
                    y: { beginAtZero: true, grid: { color: '#E5E7EB' } },
                    x: { 
                        ticks: { 
                            callback: function(val, index) {
                                return wrapLabel(this.getLabelForValue(val));
                            }
                        } 
                    }
                }
            }
        });

        // --- CHART 2: TERNARY STATES (Donut) ---
        const ctxDonut = document.getElementById('ternaryDonut').getContext('2d');
        new Chart(ctxDonut, {
            type: 'doughnut',
            data: {
                labels: ['Proceed (+1)', 'Epistemic Hold (0)', 'Refuse (-1)'],
                datasets: [{
                    data: [85, 14, 1],
                    backgroundColor: ['#10B981', '#F59E0B', '#EF4444'],
                    hoverOffset: 10,
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: tooltipPlugin,
                    legend: { position: 'bottom' }
                }
            }
        });

        // --- CHART 3: COST vs TIME (Line) ---
        const ctxLine = document.getElementById('costLineChart').getContext('2d');
        new Chart(ctxLine, {
            type: 'line',
            data: {
                labels: ['T-0 (Initiation)', 'T+2ms (Hold)', 'T+1min (Resolution)', 'T+1 Month', 'T+1 Year', 'T+5 Years'],
                datasets: [{
                    label: 'Ternary Logic Cost',
                    data: [5, 15, 10, 5, 5, 5],
                    borderColor: '#1E40AF',
                    backgroundColor: 'rgba(30, 64, 175, 0.1)',
                    tension: 0.1,
                    fill: true
                },
                {
                    label: 'Legacy AML Cost (Hidden Risk)',
                    data: [2, 2, 2, 5, 20, 95], // Explodes at regulatory fine
                    borderColor: '#EF4444',
                    borderDash: [5, 5],
                    tension: 0.4,
                    fill: false
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: tooltipPlugin,
                    title: { display: true, text: 'Cost Profile: Bounded vs. Unbounded Risk' }
                },
                scales: {
                    y: { title: { display: true, text: 'Economic Cost / Risk' } }
                }
            }
        });

        // --- CHART 4: SCATTER PLOT (Plotly - Canvas Mode) ---
        // Simulating 100 transactions
        const xValues = []; // AI Risk Score
        const yValues = []; // Transaction Value
        const colors = [];  // Color based on Action
        
        for (let i = 0; i < 150; i++) {
            let risk = Math.random() * 100;
            let val = Math.random() * 10000;
            xValues.push(risk);
            yValues.push(val);
            
            // Logic: Risk > 70 = Hold (Orange), Risk > 95 = Refuse (Red), Else Proceed (Green)
            if (risk > 90) colors.push('#EF4444'); // Refuse
            else if (risk > 60) colors.push('#F59E0B'); // Hold
            else colors.push('#10B981'); // Proceed
        }

        const trace1 = {
            x: xValues,
            y: yValues,
            mode: 'markers',
            type: 'scatter',
            marker: { size: 8, color: colors, opacity: 0.7 },
            name: 'Transactions'
        };

        const layoutScatter = {
            title: 'AI Risk Score vs. TL State',
            xaxis: { title: 'AI Probabilistic Risk Score (0-100)' },
            yaxis: { title: 'Transaction Value ($)' },
            margin: { t: 40, b: 40, l: 50, r: 20 },
            hovermode: 'closest',
            paper_bgcolor: 'rgba(0,0,0,0)',
            plot_bgcolor: 'rgba(240,240,240,0.5)',
            shapes: [
                { type: 'line', x0: 60, x1: 60, y0: 0, y1: 10000, line: { color: '#F59E0B', width: 2, dash: 'dot' } },
                { type: 'line', x0: 90, x1: 90, y0: 0, y1: 10000, line: { color: '#EF4444', width: 2, dash: 'dot' } }
            ],
            annotations: [
                { x: 30, y: 9000, text: 'Proceed (+1)', showarrow: false, font: { color: '#10B981' } },
                { x: 75, y: 9000, text: 'Hold (0)', showarrow: false, font: { color: '#F59E0B' } },
                { x: 95, y: 9000, text: 'Refuse (-1)', showarrow: false, font: { color: '#EF4444' } }
            ]
        };
        
        // Force Canvas rendering for Plotly
        Plotly.newPlot('aiScatterChart', [trace1], layoutScatter, {responsive: true, renderer: 'canvas'});

        // --- CHART 5: RADAR COMPARISON ---
        const ctxRadar = document.getElementById('radarCompare').getContext('2d');
        new Chart(ctxRadar, {
            type: 'radar',
            data: {
                labels: wrapLabel('Auditability Real-Time_Control Evidence_Capture Privacy_Protection Resilience False_Positive_Reduct'),
                datasets: [{
                    label: 'Ternary Logic',
                    data: [95, 90, 100, 85, 90, 80],
                    fill: true,
                    backgroundColor: 'rgba(30, 64, 175, 0.2)',
                    borderColor: '#1E40AF',
                    pointBackgroundColor: '#1E40AF',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#1E40AF'
                }, {
                    label: 'Traditional AML',
                    data: [40, 30, 50, 60, 40, 20],
                    fill: true,
                    backgroundColor: 'rgba(239, 68, 68, 0.2)',
                    borderColor: '#EF4444',
                    pointBackgroundColor: '#EF4444',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#EF4444'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                elements: { line: { borderWidth: 3 } },
                scales: {
                    r: {
                        angleLines: { display: true },
                        suggestedMin: 0,
                        suggestedMax: 100,
                        ticks: { backdropColor: 'transparent' } 
                    }
                },
                plugins: {
                    tooltip: tooltipPlugin,
                    legend: { position: 'top' }
                }
            }
        });
    </script>
</body>
</html>
