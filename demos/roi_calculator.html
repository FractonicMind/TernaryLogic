<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ternary Logic Framework - Economic Impact Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 40px;
            color: white;
        }
        
        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
            letter-spacing: -0.5px;
        }
        
        .header .subtitle {
            font-size: 1.1em;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .header .badge {
            display: inline-block;
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 4px;
            font-size: 0.85em;
            margin-top: 15px;
        }
        
        .calculator {
            padding: 40px;
        }
        
        .section-title {
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 400;
        }
        
        .section-subtitle {
            color: #7f8c8d;
            margin-bottom: 25px;
            font-size: 0.95em;
        }
        
        .input-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            font-weight: 500;
            margin-bottom: 8px;
            color: #495057;
            font-size: 0.9em;
        }
        
        input[type="number"], select {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            font-size: 15px;
            transition: all 0.2s;
            background: white;
        }
        
        input[type="number"]:focus, select:focus {
            outline: none;
            border-color: #4dabf7;
            box-shadow: 0 0 0 3px rgba(77, 171, 247, 0.1);
        }
        
        .input-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .pillars-section {
            background: #fff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 25px;
            margin-bottom: 30px;
        }
        
        .pillar-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .pillar-item {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .pillar-item:hover {
            background: #e9ecef;
        }
        
        .pillar-item.selected {
            background: #e3f2fd;
            border-color: #4dabf7;
        }
        
        .pillar-checkbox {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
        }
        
        .pillar-content {
            flex: 1;
        }
        
        .pillar-name {
            font-weight: 500;
            color: #2c3e50;
            font-size: 0.95em;
            margin-bottom: 4px;
        }
        
        .pillar-benefit {
            font-size: 0.85em;
            color: #7f8c8d;
        }
        
        .pillar-value {
            font-size: 0.85em;
            color: #27ae60;
            font-weight: 500;
            margin-top: 4px;
        }
        
        .calculate-btn {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .calculate-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .results {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .results.show {
            display: block;
        }
        
        .metric-card {
            background: white;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            transition: all 0.2s;
        }
        
        .metric-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }
        
        .metric-card.primary {
            border-left: 4px solid #4dabf7;
        }
        
        .metric-card.success {
            border-left: 4px solid #27ae60;
        }
        
        .metric-card.warning {
            border-left: 4px solid #e67e22;
        }
        
        .metric-card.highlight {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            border: none;
        }
        
        .metric-label {
            font-size: 0.85em;
            color: #7f8c8d;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        .metric-value {
            font-size: 28px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .metric-card.highlight .metric-label,
        .metric-card.highlight .metric-value,
        .metric-card.highlight .metric-explanation {
            color: white;
        }
        
        .metric-explanation {
            font-size: 0.9em;
            color: #7f8c8d;
            line-height: 1.5;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 30px 0;
        }
        
        .breakdown-table {
            width: 100%;
            margin: 20px 0;
            border-collapse: collapse;
        }
        
        .breakdown-table th,
        .breakdown-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        
        .breakdown-table th {
            background: #f8f9fa;
            font-weight: 500;
            color: #495057;
            font-size: 0.9em;
        }
        
        .breakdown-table td {
            font-size: 0.95em;
        }
        
        .breakdown-table tr:last-child td {
            border-bottom: none;
            font-weight: 600;
        }
        
        .chart-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 25px;
            margin: 30px 0;
            border: 1px solid #e9ecef;
        }
        
        .chart-title {
            font-size: 1.1em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 500;
        }
        
        .bar-chart {
            margin: 20px 0;
        }
        
        .bar-row {
            display: flex;
            align-items: center;
            margin: 15px 0;
        }
        
        .bar-label {
            width: 120px;
            font-size: 0.9em;
            color: #495057;
        }
        
        .bar-container {
            flex: 1;
            height: 32px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }
        
        .bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #4dabf7 0%, #339af0 100%);
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
            font-size: 0.85em;
            font-weight: 500;
            transition: width 0.5s ease;
        }
        
        .bar-fill.success {
            background: linear-gradient(135deg, #27ae60 0%, #229954 100%);
        }
        
        .bar-fill.warning {
            background: linear-gradient(135deg, #e67e22 0%, #d35400 100%);
        }
        
        .insights {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 30px 0;
            border-radius: 6px;
        }
        
        .insights h3 {
            color: #856404;
            margin-bottom: 12px;
            font-size: 1.1em;
            font-weight: 500;
        }
        
        .insight-item {
            margin: 10px 0;
            padding-left: 20px;
            position: relative;
            font-size: 0.95em;
            color: #856404;
        }
        
        .insight-item:before {
            content: "â€¢";
            position: absolute;
            left: 0;
        }
        
        .roi-summary {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-radius: 8px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid #a5d6a7;
        }
        
        .roi-summary h3 {
            color: #2e7d32;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 500;
        }
        
        .roi-metric {
            display: flex;
            justify-content: space-between;
            margin: 12px 0;
            padding: 8px 0;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .roi-metric:last-child {
            border-bottom: none;
        }
        
        .roi-metric-label {
            color: #1b5e20;
            font-size: 0.95em;
        }
        
        .roi-metric-value {
            font-weight: 600;
            color: #1b5e20;
            font-size: 1.1em;
        }
        
        .cta-section {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            text-align: center;
            margin-top: 40px;
            border-radius: 8px;
        }
        
        .cta-section h2 {
            margin-bottom: 15px;
            font-weight: 300;
            font-size: 1.8em;
        }
        
        .cta-section p {
            font-size: 1.1em;
            opacity: 0.95;
            margin-bottom: 25px;
        }
        
        .cta-button {
            display: inline-block;
            padding: 12px 28px;
            background: white;
            color: #2c3e50;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 500;
            margin: 8px;
            transition: all 0.3s;
            font-size: 0.95em;
        }
        
        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
        }
        
        .disclaimer {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
            font-size: 0.85em;
            color: #6c757d;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Ternary Logic Framework</h1>
            <p class="subtitle">Economic Impact and ROI Calculator</p>
            <span class="badge">Version 2.0 - Eight Pillars Integration</span>
        </div>
        
        <div class="calculator">
            <div class="input-section">
                <h2 class="section-title">Organization Profile</h2>
                <p class="section-subtitle">Configure your decision environment parameters</p>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="decisions">Daily Decision Volume</label>
                        <input type="number" id="decisions" value="100" min="1" max="10000">
                    </div>
                    <div class="input-group">
                        <label for="avgValue">Average Decision Value (USD)</label>
                        <input type="number" id="avgValue" value="10000" min="100" max="1000000">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="uncertainty">High Uncertainty Decisions (%)</label>
                        <input type="number" id="uncertainty" value="25" min="5" max="60">
                    </div>
                    <div class="input-group">
                        <label for="errorCost">Average Cost of Decision Error (%)</label>
                        <input type="number" id="errorCost" value="12" min="5" max="50">
                    </div>
                </div>
                
                <div class="input-row">
                    <div class="input-group">
                        <label for="domain">Primary Domain</label>
                        <select id="domain">
                            <option value="trading">Financial Trading</option>
                            <option value="banking">Banking & Finance</option>
                            <option value="policy">Policy & Strategic Planning</option>
                            <option value="operations">Operations & Supply Chain</option>
                            <option value="investment">Investment Management</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="orgSize">Organization Size</label>
                        <select id="orgSize">
                            <option value="small">Small (<100 employees)</option>
                            <option value="medium">Medium (100-1000 employees)</option>
                            <option value="large">Large (>1000 employees)</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="pillars-section">
                <h2 class="section-title">Eight Pillars Implementation</h2>
                <p class="section-subtitle">Select applicable framework components for comprehensive ROI calculation</p>
                
                <div class="pillar-grid">
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar1')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar1" checked disabled>
                        <div class="pillar-content">
                            <div class="pillar-name">1. Epistemic Hold</div>
                            <div class="pillar-benefit">Core uncertainty management</div>
                            <div class="pillar-value">Base framework benefit</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar2')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar2">
                        <div class="pillar-content">
                            <div class="pillar-name">2. Immutable Ledger</div>
                            <div class="pillar-benefit">Reduce audit & reconciliation costs</div>
                            <div class="pillar-value">+8-12% cost reduction</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar3')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar3">
                        <div class="pillar-content">
                            <div class="pillar-name">3. Goukassian Principle</div>
                            <div class="pillar-benefit">Automated compliance verification</div>
                            <div class="pillar-value">+6-10% efficiency gain</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar4')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar4">
                        <div class="pillar-content">
                            <div class="pillar-name">4. Decision Logs</div>
                            <div class="pillar-benefit">Reduce dispute resolution costs</div>
                            <div class="pillar-value">+5-8% cost avoidance</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar5')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar5">
                        <div class="pillar-content">
                            <div class="pillar-name">5. Economic Rights & Transparency</div>
                            <div class="pillar-benefit">Avoid regulatory fines (FATF/IOSCO/Basel III)</div>
                            <div class="pillar-value">+10-15% risk reduction</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar6')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar6">
                        <div class="pillar-content">
                            <div class="pillar-name">6. Sustainable Capital Allocation</div>
                            <div class="pillar-benefit">ESG compliance & green finance benefits</div>
                            <div class="pillar-value">+7-11% capital efficiency</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar7')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar7">
                        <div class="pillar-content">
                            <div class="pillar-name">7. Hybrid Shield</div>
                            <div class="pillar-benefit">Privacy compliance (GDPR) cost avoidance</div>
                            <div class="pillar-value">+4-6% risk mitigation</div>
                        </div>
                    </div>
                    
                    <div class="pillar-item" onclick="togglePillar(this, 'pillar8')">
                        <input type="checkbox" class="pillar-checkbox" id="pillar8">
                        <div class="pillar-content">
                            <div class="pillar-name">8. Anchors</div>
                            <div class="pillar-benefit">Enhanced trust & verification</div>
                            <div class="pillar-value">+3-5% operational efficiency</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <button class="calculate-btn" onclick="calculateROI()">
                Calculate Economic Impact
            </button>
            
            <div class="results" id="results">
                <h2 class="section-title">Economic Impact Analysis</h2>
                <p class="section-subtitle">Based on your parameters and selected pillars</p>
                
                <div class="comparison-grid">
                    <div class="metric-card warning">
                        <div class="metric-label">Current Binary Decision Cost</div>
                        <div class="metric-value" id="currentCost">$0</div>
                        <div class="metric-explanation">
                            Annual cost of forced binary decisions under uncertainty
                        </div>
                    </div>
                    
                    <div class="metric-card success">
                        <div class="metric-label">Projected Annual Savings</div>
                        <div class="metric-value" id="annualSavings">$0</div>
                        <div class="metric-explanation">
                            Total savings with selected TL pillars
                        </div>
                    </div>
                </div>
                
                <div class="metric-card highlight">
                    <div class="metric-label">Critical Finding</div>
                    <div class="metric-value" id="holdDecisions">0 decisions/day</div>
                    <div class="metric-explanation">
                        These decisions require Epistemic Hold but are currently forced into binary outcomes,
                        resulting in an estimated <span id="errorReduction">0</span>% error reduction opportunity.
                    </div>
                </div>
                
                <div class="chart-container">
                    <h3 class="chart-title">Savings Breakdown by Pillar</h3>
                    <div class="bar-chart" id="savingsBreakdown">
                        <!-- Dynamically populated -->
                    </div>
                </div>
                
                <div class="metric-card">
                    <h3 style="margin-bottom: 20px; color: #2c3e50;">Detailed Cost-Benefit Analysis</h3>
                    <table class="breakdown-table">
                        <thead>
                            <tr>
                                <th>Component</th>
                                <th>Annual Benefit</th>
                                <th>Implementation Cost</th>
                                <th>Net Benefit</th>
                            </tr>
                        </thead>
                        <tbody id="breakdownTable">
                            <!-- Dynamically populated -->
                        </tbody>
                    </table>
                </div>
                
                <div class="roi-summary">
                    <h3>Return on Investment Summary</h3>
                    <div class="roi-metric">
                        <span class="roi-metric-label">Total Implementation Cost</span>
                        <span class="roi-metric-value" id="totalCost">$0</span>
                    </div>
                    <div class="roi-metric">
                        <span class="roi-metric-label">Annual Net Benefit</span>
                        <span class="roi-metric-value" id="netBenefit">$0</span>
                    </div>
                    <div class="roi-metric">
                        <span class="roi-metric-label">ROI Percentage</span>
                        <span class="roi-metric-value" id="roiPercent">0%</span>
                    </div>
                    <div class="roi-metric">
                        <span class="roi-metric-label">Payback Period</span>
                        <span class="roi-metric-value" id="payback">0 months</span>
                    </div>
                    <div class="roi-metric">
                        <span class="roi-metric-label">5-Year NPV (8% discount)</span>
                        <span class="roi-metric-value" id="npv">$0</span>
                    </div>
                </div>
                
                <div class="insights">
                    <h3>Domain-Specific Insights</h3>
                    <div id="domainInsights"></div>
                </div>
                
                <div class="disclaimer">
                    <strong>Note:</strong> These calculations are based on industry averages and conservative estimates. 
                    Actual results may vary based on implementation quality, organizational readiness, and market conditions.
                    All estimates assume proper implementation following the Eight Pillars architecture.
                </div>
                
                <div class="cta-section">
                    <h2>Ready to Implement Ternary Logic?</h2>
                    <p>Every day of delay costs your organization <span id="dailyCost">$0</span> in suboptimal decisions</p>
                    <div style="margin-top: 25px;">
                        <a href="https://github.com/FractonicMind/TernaryLogic" class="cta-button">View Implementation Guide</a>
                        <a href="https://github.com/FractonicMind/TernaryLogic/blob/main/docs/MANDATORY.md" class="cta-button">Technical Requirements</a>
                        <a href="mailto:leogouk@gmail.com" class="cta-button">Contact for Consultation</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'USD',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }
        
        function formatPercent(value) {
            return (value * 100).toFixed(1) + '%';
        }
        
        function togglePillar(element, pillardId) {
            const checkbox = element.querySelector('.pillar-checkbox');
            if (!checkbox.disabled) {
                checkbox.checked = !checkbox.checked;
                element.classList.toggle('selected', checkbox.checked);
            }
        }
        
        function calculateROI() {
            // Get inputs
            const decisionsPerDay = parseFloat(document.getElementById('decisions').value);
            const avgValue = parseFloat(document.getElementById('avgValue').value);
            const uncertaintyPercent = parseFloat(document.getElementById('uncertainty').value) / 100;
            const errorCostPercent = parseFloat(document.getElementById('errorCost').value) / 100;
            const domain = document.getElementById('domain').value;
            const orgSize = document.getElementById('orgSize').value;
            
            // Get selected pillars
            const pillars = {
                pillar1: true, // Always included
                pillar2: document.getElementById('pillar2').checked,
                pillar3: document.getElementById('pillar3').checked,
                pillar4: document.getElementById('pillar4').checked,
                pillar5: document.getElementById('pillar5').checked,
                pillar6: document.getElementById('pillar6').checked,
                pillar7: document.getElementById('pillar7').checked,
                pillar8: document.getElementById('pillar8').checked
            };
            
            // Calculate base metrics
            const holdDecisions = decisionsPerDay * uncertaintyPercent;
            const dailyDecisionValue = decisionsPerDay * avgValue;
            
            // Conservative error rates
            const errorRateWithoutHold = 0.35; // 35% error rate under uncertainty
            const errorRateWithHold = 0.12; // 12% with Epistemic Hold
            const errorReduction = (errorRateWithoutHold - errorRateWithHold) / errorRateWithoutHold;
            
            // Working days per year
            const daysPerYear = domain === 'trading' ? 252 : 250;
            
            // Calculate current costs (without TL)
            const errorsPerDay = holdDecisions * errorRateWithoutHold;
            const dailyCostCurrent = errorsPerDay * avgValue * errorCostPercent;
            const annualCostCurrent = dailyCostCurrent * daysPerYear;
            
            // Calculate savings by pillar
            let savings = {};
            let costs = {};
            
            // Base implementation costs by org size
            const baseCostMultiplier = {
                'small': 1,
                'medium': 1.5,
                'large': 2
            }[orgSize];
            
            // Pillar 1: Epistemic Hold (base)
            savings.epistemic = annualCostCurrent * errorReduction * 0.7; // Conservative 70% capture
            costs.epistemic = 35000 * baseCostMultiplier;
            
            // Pillar 2: Immutable Ledger
            if (pillars.pillar2) {
                const auditCostReduction = dailyDecisionValue * 0.002 * daysPerYear; // 0.2% of decision value
                savings.ledger = Math.min(auditCostReduction, annualCostCurrent * 0.12);
                costs.ledger = 25000 * baseCostMultiplier;
            }
            
            // Pillar 3: Goukassian Principle
            if (pillars.pillar3) {
                const complianceEfficiency = dailyDecisionValue * 0.0015 * daysPerYear;
                savings.goukassian = Math.min(complianceEfficiency, annualCostCurrent * 0.10);
                costs.goukassian = 20000 * baseCostMultiplier;
            }
            
            // Pillar 4: Decision Logs
            if (pillars.pillar4) {
                const disputeCostAvoidance = decisionsPerDay * 0.01 * avgValue * 0.2 * daysPerYear; // 1% dispute rate
                savings.decisionLogs = Math.min(disputeCostAvoidance, annualCostCurrent * 0.08);
                costs.decisionLogs = 15000 * baseCostMultiplier;
            }
            
            // Pillar 5: Economic Rights & Transparency
            if (pillars.pillar5) {
                const regulatoryPenaltyAvoidance = avgValue * decisionsPerDay * 0.0001 * daysPerYear;
                const fineAvoidance = domain === 'banking' ? 50000 : 25000;
                savings.economic = Math.min(regulatoryPenaltyAvoidance + fineAvoidance, annualCostCurrent * 0.15);
                costs.economic = 30000 * baseCostMultiplier;
            }
            
            // Pillar 6: Sustainable Capital
            if (pillars.pillar6) {
                const esgBenefit = domain === 'investment' ? avgValue * decisionsPerDay * 0.0003 * daysPerYear : 
                                   avgValue * decisionsPerDay * 0.0001 * daysPerYear;
                savings.sustainable = Math.min(esgBenefit, annualCostCurrent * 0.11);
                costs.sustainable = 25000 * baseCostMultiplier;
            }
            
            // Pillar 7: Hybrid Shield
            if (pillars.pillar7) {
                const privacyCompliance = 20000; // GDPR fine avoidance
                savings.hybrid = Math.min(privacyCompliance, annualCostCurrent * 0.06);
                costs.hybrid = 18000 * baseCostMultiplier;
            }
            
            // Pillar 8: Anchors
            if (pillars.pillar8) {
                const trustEfficiency = dailyDecisionValue * 0.0008 * daysPerYear;
                savings.anchors = Math.min(trustEfficiency, annualCostCurrent * 0.05);
                costs.anchors = 12000 * baseCostMultiplier;
            }
            
            // Calculate totals
            const totalSavings = Object.values(savings).reduce((a, b) => a + b, 0);
            const totalCosts = Object.values(costs).reduce((a, b) => a + b, 0);
            const netBenefit = totalSavings - (totalCosts * 0.2); // Amortize over 5 years
            const roi = ((netBenefit / totalCosts) * 100);
            const paybackMonths = (totalCosts / (totalSavings / 12));
            
            // Calculate 5-year NPV at 8% discount rate
            let npv = -totalCosts;
            for (let year = 1; year <= 5; year++) {
                npv += totalSavings / Math.pow(1.08, year);
            }
            
            // Update display
            document.getElementById('currentCost').textContent = formatCurrency(annualCostCurrent);
            document.getElementById('annualSavings').textContent = formatCurrency(totalSavings);
            document.getElementById('holdDecisions').textContent = Math.round(holdDecisions) + ' decisions/day';
            document.getElementById('errorReduction').textContent = (errorReduction * 100).toFixed(0);
            document.getElementById('dailyCost').textContent = formatCurrency(dailyCostCurrent);
            
            // Update savings breakdown chart
            updateSavingsChart(savings);
            
            // Update breakdown table
            updateBreakdownTable(savings, costs);
            
            // Update ROI summary
            document.getElementById('totalCost').textContent = formatCurrency(totalCosts);
            document.getElementById('netBenefit').textContent = formatCurrency(netBenefit);
            document.getElementById('roiPercent').textContent = roi.toFixed(0) + '%';
            document.getElementById('payback').textContent = paybackMonths.toFixed(1) + ' months';
            document.getElementById('npv').textContent = formatCurrency(npv);
            
            // Domain insights
            updateDomainInsights(domain, holdDecisions, errorReduction);
            
            // Show results
            document.getElementById('results').classList.add('show');
        }
        
        function updateSavingsChart(savings) {
            const container = document.getElementById('savingsBreakdown');
            const total = Object.values(savings).reduce((a, b) => a + b, 0);
            
            const labels = {
                epistemic: 'Epistemic Hold (Core)',
                ledger: 'Immutable Ledger',
                goukassian: 'Goukassian Principle',
                decisionLogs: 'Decision Logs',
                economic: 'Economic Rights',
                sustainable: 'Sustainable Capital',
                hybrid: 'Hybrid Shield',
                anchors: 'Anchors'
            };
            
            let html = '';
            for (const [key, value] of Object.entries(savings)) {
                if (value > 0) {
                    const percent = (value / total * 100);
                    const colorClass = key === 'epistemic' ? 'success' : percent > 10 ? '' : 'warning';
                    html += `
                        <div class="bar-row">
                            <div class="bar-label">${labels[key]}</div>
                            <div class="bar-container">
                                <div class="bar-fill ${colorClass}" style="width: ${percent}%">
                                    ${formatCurrency(value)}
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            container.innerHTML = html;
        }
        
        function updateBreakdownTable(savings, costs) {
            const tbody = document.getElementById('breakdownTable');
            
            const labels = {
                epistemic: 'Epistemic Hold (Core Framework)',
                ledger: 'Immutable Ledger',
                goukassian: 'Goukassian Principle',
                decisionLogs: 'Decision Logs',
                economic: 'Economic Rights & Transparency',
                sustainable: 'Sustainable Capital Allocation',
                hybrid: 'Hybrid Shield',
                anchors: 'Blockchain Anchors'
            };
            
            let html = '';
            let totalSavings = 0;
            let totalCosts = 0;
            
            for (const [key, value] of Object.entries(savings)) {
                if (value > 0) {
                    const cost = costs[key] || 0;
                    const amortizedCost = cost * 0.2; // 5-year amortization
                    const net = value - amortizedCost;
                    
                    html += `
                        <tr>
                            <td>${labels[key]}</td>
                            <td>${formatCurrency(value)}</td>
                            <td>${formatCurrency(amortizedCost)}</td>
                            <td><strong>${formatCurrency(net)}</strong></td>
                        </tr>
                    `;
                    
                    totalSavings += value;
                    totalCosts += amortizedCost;
                }
            }
            
            html += `
                <tr style="background: #f8f9fa;">
                    <td><strong>Total</strong></td>
                    <td><strong>${formatCurrency(totalSavings)}</strong></td>
                    <td><strong>${formatCurrency(totalCosts)}</strong></td>
                    <td><strong>${formatCurrency(totalSavings - totalCosts)}</strong></td>
                </tr>
            `;
            
            tbody.innerHTML = html;
        }
        
        function updateDomainInsights(domain, holdDecisions, errorReduction) {
            const container = document.getElementById('domainInsights');
            
            const insights = {
                trading: [
                    `High-frequency trading environments show ${(errorReduction * 100).toFixed(0)}% reduction in costly position errors`,
                    `Epistemic Hold prevents approximately ${Math.round(holdDecisions * 0.4)} premature trades daily`,
                    `Regulatory compliance (MiFID II, Dodd-Frank) automated through Pillars 5 & 6`,
                    `Expected reduction in market manipulation flags: 65-75%`
                ],
                banking: [
                    `Basel III compliance automated through continuous monitoring`,
                    `AML/CFT false positives reduced by estimated 45-55%`,
                    `Credit decision quality improvement: ${(errorReduction * 100).toFixed(0)}%`,
                    `Regulatory reporting effort reduced by 30-40%`
                ],
                policy: [
                    `Policy decisions benefit from ${Math.round(holdDecisions)} daily deliberation opportunities`,
                    `Stakeholder satisfaction increases through transparent decision logs`,
                    `Compliance audit time reduced by 50-60%`,
                    `Evidence-based policy making enhanced through immutable records`
                ],
                operations: [
                    `Supply chain disruption response time improved by 35-45%`,
                    `Inventory optimization through uncertainty management`,
                    `Vendor dispute resolution accelerated by 60-70%`,
                    `ESG compliance tracking automated for sustainable operations`
                ],
                investment: [
                    `Portfolio rebalancing decisions improved by ${(errorReduction * 100).toFixed(0)}%`,
                    `ESG verification prevents greenwashing risks`,
                    `Due diligence efficiency increased by 40-50%`,
                    `Client reporting automated through Decision Logs`
                ]
            };
            
            let html = '';
            const domainInsights = insights[domain] || insights.investment;
            for (const insight of domainInsights) {
                html += `<div class="insight-item">${insight}</div>`;
            }
            
            container.innerHTML = html;
        }
        
        // Initialize with Pillar 1 selected
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('pillar1').parentElement.parentElement.classList.add('selected');
        });
    </script>
</body>
</html>
